<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Simulador EXANI-II UV PRO</title>
<style>
body{font-family:Arial;background:#f0f2f5;text-align:center}
.container{background:white;width:90%;margin:20px auto;padding:20px;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,0.2)}
button{padding:10px;margin:5px;border:none;border-radius:5px;background:#1976D2;color:white;cursor:pointer}
button:hover{background:#0d47a1}
.hidden{display:none}
.correct{color:green}
.incorrect{color:red}
.question{text-align:left;margin:15px 0}
</style>
</head>
<body>

<div class="container">

<h1>Simulador EXANI-II UV</h1>
<h3>D칤a: <span id="day"></span></h3>
<h3>Racha: <span id="streak"></span></h3>

<div id="subjects">
<button onclick="startExam('lectura')">Comprensi칩n Lectora</button>
<button onclick="startExam('redaccion')">Redacci칩n Indirecta</button>
<button onclick="startExam('mate')">Pensamiento Matem치tico</button>
</div>

<div id="exam" class="hidden">
<h2 id="title"></h2>
<div id="questionBox"></div>
<button onclick="nextQuestion()">Siguiente</button>
</div>

<div id="results" class="hidden"></div>

</div>

<script>

// ====== SISTEMA DE RACHAS GUARDADAS ======
let day = localStorage.getItem("day") ? parseInt(localStorage.getItem("day")) : 1;
let streak = localStorage.getItem("streak") ? parseInt(localStorage.getItem("streak")) : 0;

document.getElementById("day").innerText = day;
document.getElementById("streak").innerText = streak;

// ===== VARIABLES =====
let currentSubject="";
let questionIndex=0;
let correctCount=0;
let selectedQuestions=[];
let userAnswers=[];

// ===== BANCO REALISTA =====
const bank = {

mate:[
{level:"facil",q:"쮺u치nto es 25% de 200?",o:["25","40","50","75"],a:2},
{level:"facil",q:"Si x + 3 = 7, x es:",o:["2","3","4","5"],a:2},
{level:"facil",q:"3/4 es equivalente a:",o:["0.25","0.5","0.75","1.25"],a:2},
{level:"media",q:"Si 5 l치pices cuestan $20, 쯖u치nto cuestan 8?",o:["28","30","32","35"],a:2},
{level:"media",q:"Resuelve: 2x - 4 = 10",o:["6","7","8","9"],a:1},
{level:"media",q:"Una sucesi칩n aumenta de 3 en 3: 3,6,9,... 쯥iguiente?",o:["10","11","12","13"],a:2},
{level:"media",q:"Probabilidad de sacar cara en moneda:",o:["0","0.25","0.5","1"],a:2},
{level:"dificil",q:"Si 2x + 3y = 12 y x=3, y es:",o:["1","2","3","4"],a:1},
{level:"dificil",q:"츼rea de tri치ngulo base 10 altura 6:",o:["30","60","20","16"],a:0},
{level:"dificil",q:"Inter칠s simple 10% de 1000 en 1 a침o:",o:["50","100","150","200"],a:1}
],

lectura:[
{level:"facil",q:"Idea principal es:",o:["Detalle","Tema central","Ejemplo","T칤tulo"],a:1},
{level:"facil",q:"Inferir es:",o:["Copiar","Deducir","Subrayar","Enumerar"],a:1},
{level:"media",q:"Texto que intenta convencer:",o:["Narrativo","Argumentativo","Descriptivo","L칤rico"],a:1},
{level:"media",q:"Conector de contraste:",o:["Porque","Aunque","Adem치s","Entonces"],a:1},
{level:"media",q:"Prop칩sito informativo significa:",o:["Convencer","Informar","Criticar","Narrar ficci칩n"],a:1},
{level:"dificil",q:"Si algo no se dice expl칤cito pero se entiende es:",o:["Resumen","Inferencia","Copia","Literal"],a:1},
{level:"dificil",q:"Relaci칩n causa-efecto implica:",o:["Comparaci칩n","Motivo y resultado","Opini칩n","Lugar"],a:1},
{level:"dificil",q:"Conclusi칩n se ubica:",o:["Inicio","Desarrollo","Final","T칤tulo"],a:2}
],

redaccion:[
{level:"facil",q:"쮺u치l est치 bien escrita?",o:["El ni침o comio","El ni침o comi칩","El ni침o com칤o","El ni침o comi"],a:1},
{level:"facil",q:"Uso correcto:",o:["Porque no vienes?","쯇or qu칠 no vienes?","Porqu칠 no vienes?","Por que no vienes?"],a:1},
{level:"media",q:"Concordancia correcta:",o:["Las perro corre","Los perros corren","El perros corre","La perros corren"],a:1},
{level:"media",q:"Uso correcto de coma:",o:["Hola Juan como estas","Hola, Juan, 쯖칩mo est치s?","Hola Juan, como estas","Hola, Juan como estas"],a:1},
{level:"dificil",q:"Palabra esdr칰jula:",o:["Cantar","Cami칩n","L치piz","츼rboles"],a:3},
{level:"dificil",q:"Acentuaci칩n correcta:",o:["Rap칤do","R치pido","Rapido","Rapi칤do"],a:1}
]

};

// ===== FUNCIONES =====

function startExam(subject){
currentSubject=subject;
questionIndex=0;
correctCount=0;
userAnswers=[];

selectedQuestions = [...bank[subject]];
selectedQuestions = shuffle(selectedQuestions).slice(0,15);

document.getElementById("subjects").classList.add("hidden");
document.getElementById("exam").classList.remove("hidden");
document.getElementById("results").classList.add("hidden");

let titles={
mate:"Pensamiento Matem치tico",
lectura:"Comprensi칩n Lectora",
redaccion:"Redacci칩n Indirecta"
};

document.getElementById("title").innerText=titles[subject];

showQuestion();
}

function showQuestion(){
let q=selectedQuestions[questionIndex];
document.getElementById("questionBox").innerHTML=`
<div class="question">
<h3>Pregunta ${questionIndex+1}</h3>
<p>${q.q}</p>
${q.o.map((opt,i)=>
`<label><input type="radio" name="option" value="${i}"> ${opt}</label><br>`
).join("")}
</div>`;
}

function nextQuestion(){
let selected=document.querySelector('input[name="option"]:checked');
if(!selected){alert("Selecciona respuesta");return;}

let val=parseInt(selected.value);
userAnswers.push(val);

if(val===selectedQuestions[questionIndex].a){correctCount++;}

questionIndex++;

if(questionIndex<15){
showQuestion();
}else{
finishExam();
}
}

function finishExam(){

document.getElementById("exam").classList.add("hidden");
document.getElementById("results").classList.remove("hidden");

let div=document.getElementById("results");
div.innerHTML=`<h2>Resultado</h2>
<p>Correctas: ${correctCount}/15</p>`;

if(correctCount===15){
streak++;
day++;
localStorage.setItem("streak",streak);
localStorage.setItem("day",day);
div.innerHTML+=`<p class="correct">춰Perfecto! Subes de d칤a 游댠</p>`;
}else{
streak=0;
localStorage.setItem("streak",streak);
div.innerHTML+=`<p class="incorrect">No alcanzaste 15/15</p>`;
}

div.innerHTML+="<h3>Revisi칩n:</h3>";

selectedQuestions.forEach((q,i)=>{
if(userAnswers[i]===q.a){
div.innerHTML+=`<p class="correct">Pregunta ${i+1}: Correcta</p>`;
}else{
div.innerHTML+=`<p class="incorrect">
Pregunta ${i+1}: Incorrecta<br>
Tu respuesta: ${q.o[userAnswers[i]]}<br>
Correcta: ${q.o[q.a]}
</p>`;
}
});

document.getElementById("day").innerText=day;
document.getElementById("streak").innerText=streak;

div.innerHTML+=`<br><button onclick="location.reload()">Volver</button>`;
}

function shuffle(array){
for(let i=array.length-1;i>0;i--){
let j=Math.floor(Math.random()*(i+1));
[array[i],array[j]]=[array[j],array[i]];
}
return array;
}

</script>
</body>
</html>
