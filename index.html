<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master EXANI-II - Simulador de Alto Rendimiento</title>
    <style>
        :root {
            --primary: #2563eb;
            --success: #22c55e;
            --error: #ef4444;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 650px;
            background: var(--card);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
        }

        /* Barra de Progreso */
        .progress-container {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        #progress-bar {
            width: 0%;
            height: 100%;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .stats-header {
            display: flex;
            justify-content: space-between;
            font-weight: 700;
            font-size: 0.9rem;
            color: #64748b;
        }

        .streak-badge {
            background: #fef3c7;
            color: #92400e;
            padding: 4px 12px;
            border-radius: 20px;
            border: 1px solid #fcd34d;
        }

        h1 { font-size: 1.5rem; margin: 0; color: var(--primary); }

        /* Botones de men√∫ */
        .menu-grid {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .btn-subject {
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            background: white;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
        }

        .btn-subject:hover {
            border-color: var(--primary);
            background: #eff6ff;
            transform: translateY(-2px);
        }

        /* Opciones de pregunta */
        .options-list { margin-top: 20px; }

        .option-item {
            display: block;
            padding: 15px;
            margin-bottom: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: 0.2s;
            position: relative;
        }

        .option-item:hover { border-color: #cbd5e1; }

        input[type="radio"] { display: none; }

        /* Estados de respuesta */
        .correct-opt { background: #dcfce7 !important; border-color: #22c55e !important; }
        .incorrect-opt { background: #fee2e2 !important; border-color: #ef4444 !important; }

        .explanation-box {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 0.9rem;
            line-height: 1.5;
            display: none;
        }

        .hidden { display: none; }

        button#action-btn {
            width: 100%;
            padding: 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            margin-top: 20px;
            cursor: pointer;
        }

        .review-card {
            text-align: left;
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="stats-header">
        <span>D√≠a <span id="day-val">1</span></span>
        <span class="streak-badge">Racha: <span id="streak-val">0</span> üî•</span>
    </div>

    <div id="home-screen">
        <h1>Simulador UV PRO</h1>
        <p>Selecciona un m√≥dulo para comenzar tu pr√°ctica diaria:</p>
        <div class="menu-grid">
            <button class="btn-subject" onclick="initQuiz('mate')">
                <strong>üìê Pensamiento Matem√°tico</strong><br>
                <small>√Ålgebra, Geometr√≠a, Estad√≠stica y Trigonometr√≠a</small>
            </button>
            <button class="btn-subject" onclick="initQuiz('lectura')">
                <strong>üìñ Comprensi√≥n Lectora</strong><br>
                <small>√Åmbito literario, acad√©mico y social</small>
            </button>
            <button class="btn-subject" onclick="initQuiz('redaccion')">
                <strong>‚úçÔ∏è Redacci√≥n Indirecta</strong><br>
                <small>Ortograf√≠a, puntuaci√≥n y gram√°tica</small>
            </button>
        </div>
    </div>

    <div id="quiz-screen" class="hidden">
        <div class="progress-container"><div id="progress-bar"></div></div>
        <h3 id="question-text"></h3>
        <div id="options-container" class="options-list"></div>
        <div id="feedback-box" class="explanation-box"></div>
        <button id="action-btn" onclick="handleAction()">Confirmar</button>
    </div>

    <div id="result-screen" class="hidden">
        <h2 id="result-title"></h2>
        <p id="result-score"></p>
        <div id="review-area"></div>
        <button id="action-btn" onclick="location.reload()">Regresar al inicio</button>
    </div>
</div>

<script>
// --- DATOS DEL BANCO ---
const bank = {
    mate: [
        {q: "Resuelve el sistema 2x2: x+y=5, x-y=1. ¬øCu√°nto vale x?", o: ["2", "3", "4", "1"], a: 1, exp: "M√©todo de suma: (x+y) + (x-y) = 5+1 -> 2x = 6 -> x = 3."},
        {q: "Simplifica: (x¬≥)¬≤ / x¬≤", o: ["x¬≥", "x‚Å¥", "x‚Åµ", "x‚Å∂"], a: 1, exp: "Potencia de potencia: (x¬≥)¬≤ = x‚Å∂. Divisi√≥n: x‚Å∂ / x¬≤ = x‚Å¥ (6-2=4)."},
        {q: "Un √°ngulo de un tri√°ngulo rect√°ngulo mide 30¬∞. ¬øCu√°nto mide el otro √°ngulo agudo?", o: ["30¬∞", "45¬∞", "60¬∞", "90¬∞"], a: 2, exp: "La suma de los √°ngulos agudos en un tri√°ngulo rect√°ngulo es 90¬∞. 90 - 30 = 60."},
        {q: "Si el di√°metro de un c√≠rculo es 10, ¬øcu√°l es su √°rea?", o: ["10œÄ", "25œÄ", "100œÄ", "5œÄ"], a: 1, exp: "Radio = 5. √Årea = œÄ * r¬≤ = œÄ * 5¬≤ = 25œÄ."},
        {q: "Leyes de signos: (-5) * (-2) + (-3)", o: ["7", "13", "-13", "-7"], a: 0, exp: "(-5)*(-2) = 10 positivo. 10 - 3 = 7."},
        {q: "¬øCu√°l es la mediana de: 2, 8, 3, 7, 5?", o: ["3", "5", "7", "8"], a: 1, exp: "Ordenamos: 2, 3, 5, 7, 8. El valor central es 5."},
        {q: "Factoriza x¬≤ + 5x + 6:", o: ["(x+1)(x+6)", "(x+2)(x+3)", "(x-2)(x-3)", "x(x+5)"], a: 1, exp: "Buscamos n√∫meros que sumen 5 y multipliquen 6: 2 y 3."},
        {q: "Valor de la hipotenusa si catetos son 6 y 8:", o: ["10", "12", "14", "100"], a: 0, exp: "‚àö(6¬≤+8¬≤) = ‚àö(36+64) = ‚àö100 = 10."},
        {q: "Seno(30¬∞) es igual a:", o: ["0.5", "0.86", "1", "0.70"], a: 0, exp: "El seno de 30 grados es exactamente 1/2 o 0.5."},
        {q: "¬øCu√°l es el 15% de 200?", o: ["20", "25", "30", "35"], a: 2, exp: "200 * 0.15 = 30."}
    ],
    lectura: [
        {q: "¬øQu√© caracteriza a un texto cient√≠fico de divulgaci√≥n?", o: ["Uso de lenguaje muy t√©cnico", "Busca que el p√∫blico general entienda", "Es una opini√≥n personal", "Es un poema"], a: 1, exp: "La divulgaci√≥n traduce temas complejos para que cualquier persona los comprenda."},
        {q: "Identifica la met√°fora:", o: ["Tus ojos son como el mar", "Las perlas de tu boca", "Corre tan r√°pido como el viento", "El perro ladra"], a: 1, exp: "'Las perlas de tu boca' sustituye dientes por perlas sin usar 'como' (eso ser√≠a s√≠mil)."},
        {q: "¬øEn qu√© parte de una noticia se resume lo m√°s importante?", o: ["Cuerpo", "Lead o Entradilla", "Cierre", "Pie de foto"], a: 1, exp: "El primer p√°rrafo o entradilla responde a las preguntas b√°sicas (qui√©n, qu√©, d√≥nde...)."}
    ],
    redaccion: [
        {q: "Palabra con error ortogr√°fico:", o: ["Halla (encontrar)", "Haya (haber)", "Halla (√°rbol)", "All√° (lugar)"], a: 2, exp: "El √°rbol es 'Haya'. 'Halla' con doble 'l' es del verbo hallar."},
        {q: "Uso de puntos suspensivos correcto:", o: ["Para dudar...", "Al final de cada frase...", "En vez de coma...", "No existen"], a: 0, exp: "Se usan para indicar suspenso, duda o una enumeraci√≥n incompleta."},
        {q: "Concordancia: 'El grupo de manifestantes ___ la calle'.", o: ["bloque√≥", "bloquearon", "bloqueas", "bloquear"], a: 0, exp: "Sujeto colectivo singular (El grupo) requiere verbo en singular (bloque√≥)."}
    ]
};

// --- L√ìGICA DEL SIMULADOR ---
let currentQuestions = [];
let idx = 0;
let score = 0;
let state = "asking"; // asking, feedback

function initQuiz(subject) {
    currentQuestions = shuffle([...bank[subject]]).slice(0, 10);
    idx = 0; score = 0;
    document.getElementById("home-screen").classList.add("hidden");
    document.getElementById("quiz-screen").classList.remove("hidden");
    renderQuestion();
}

function renderQuestion() {
    state = "asking";
    const q = currentQuestions[idx];
    document.getElementById("question-text").innerText = q.q;
    document.getElementById("feedback-box").style.display = "none";
    document.getElementById("action-btn").innerText = "Confirmar respuesta";
    
    const container = document.getElementById("options-container");
    container.innerHTML = "";
    
    q.o.forEach((opt, i) => {
        const label = document.createElement("label");
        label.className = "option-item";
        label.innerHTML = `<input type="radio" name="quiz" value="${i}"> ${opt}`;
        label.onclick = () => {
            if(state === "asking") {
                document.querySelectorAll('.option-item').forEach(el => el.style.borderColor = '#e2e8f0');
                label.style.borderColor = 'var(--primary)';
            }
        };
        container.appendChild(label);
    });

    // Barra de progreso
    document.getElementById("progress-bar").style.width = `${(idx / currentQuestions.length) * 100}%`;
}

function handleAction() {
    if (state === "asking") {
        const selected = document.querySelector('input[name="quiz"]:checked');
        if (!selected) return alert("Selecciona una opci√≥n");

        const ans = parseInt(selected.value);
        const correct = currentQuestions[idx].a;
        const options = document.querySelectorAll('.option-item');

        state = "feedback";
        if (ans === correct) {
            score++;
            options[ans].classList.add("correct-opt");
        } else {
            options[ans].classList.add("incorrect-opt");
            options[correct].classList.add("correct-opt");
        }

        const fb = document.getElementById("feedback-box");
        fb.innerHTML = `<strong>Explicaci√≥n:</strong> ${currentQuestions[idx].exp}`;
        fb.style.display = "block";
        document.getElementById("action-btn").innerText = "Siguiente pregunta";

    } else {
        idx++;
        if (idx < currentQuestions.length) {
            renderQuestion();
        } else {
            showResults();
        }
    }
}

function showResults() {
    document.getElementById("quiz-screen").classList.add("hidden");
    const screen = document.getElementById("result-screen");
    screen.classList.remove("hidden");

    const passed = score === currentQuestions.length;
    
    if(passed) {
        let s = parseInt(localStorage.getItem("streak") || 0) + 1;
        let d = parseInt(localStorage.getItem("day") || 1) + 1;
        localStorage.setItem("streak", s);
        localStorage.setItem("day", d);
        document.getElementById("result-title").innerHTML = "¬°PERFECTO! üî•";
        document.getElementById("result-title").className = "correct";
    } else {
        localStorage.setItem("streak", 0);
        document.getElementById("result-title").innerHTML = "Necesitas repasar üìö";
        document.getElementById("result-title").className = "incorrect";
    }

    document.getElementById("result-score").innerText = `Aciertos: ${score} de ${currentQuestions.length}`;
    
    // Actualizar UI de racha inmediatamente
    document.getElementById("streak-val").innerText = localStorage.getItem("streak");
    document.getElementById("day-val").innerText = localStorage.getItem("day");
}

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

// Cargar datos iniciales
document.getElementById("streak-val").innerText = streak;
document.getElementById("day-val").innerText = day;

</script>
</body>
</html>
